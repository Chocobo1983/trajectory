{
  "Server": {
    "MqttPort": "1883",
    "MqttClientPublishTimeout": "00:00:01.5",
    "MqttConnectionTimeout": "00:00:02.5",
    "MqttMessageTtl": "00:00:05"
  },
  "AppDataPath": {
    "WorkingFilePath": "./"
  },
  "FeatureManagement": {
    "IQDataStreaming": false,
    "SupportNetSdr16": true
  },
  "ConnectionStrings": {
    "db": "Data Source=%CommonAppDataPath%\\data.db"
  },
  "General": {
    "StationType": "ArchontA",
    "SocketReceiveBufferSize": 50000000,
    "CsvDelimiter": ";",
    "RefreshPositionInterval": "00:01:00",
    "StationId": 1,
    "SocketKeepAliveTime": "00:00:01",
    "SocketKeepAliveInterval": "00:00:01",
    "TcpKeepAliveRetryCount": 1,
    "SocketConnectionRetryInterval": 100,
    "CodeExecutionTimeout": "00:00:00.01",
    "GnssRecordingInterval": "00:00:05",
    "TrajectoryBufferCapacity": 100,
    "ReceiverMonitoringInterval": "00:00:15"

  },
  "PolicyRegistry": {
    "SendCommandRetry": {
      "CommandRetryCount": 3,
      "CommandRetryInterval": "00:00:00"
    }
  },
  "Sources": {
    "Video": {
      "HistogramBinCount": 128,
      "HistogramUpdateInterval": 500
    }
  },
  "BandsHistogram": {
    "BucketNumber": 80,
    "QueueTime": "00:00:10",
    "HistogramUpdateTime": "00:00:01"
  },
  "Streaming": {
    "SessionCleanupInterval": 3000,
    "SocketKeepAliveTime": "00:00:01",
    "SocketKeepAliveInterval": "00:00:01",
    "TcpKeepAliveRetryCount": 1,
    "RepeaterLocalIpAddress": null,
    "Mtu": 1500,
    "ReceiveBufferSize": 134217728,
    "Protocols": {
      "IQ": "Udp",
      "IQWithTimestamp": "Udp",
      "Pdw": "Quic",
      "PersistenceSpectrum": "Tcp",
      "Spectrogram": "Tcp",
      "Threshold": "Tcp"
    },
    "Quic": {
      "ServerCertificateThumbprint": "",
      "InitialRttMs": 100,
      "MaxAckDelayMs": 5,
      "MaxWorkerQueueDelayMs": 50,
      "MtuDiscoveryMissingProbeCount": 0,
      "MtuDiscoverySearchCompleteTimeoutUs": 30000000,
      "StreamRecvBufferDefault": 67108864,
      "StreamRecvWindowDefault": 67108864,
      "StreamRecvWindowUnidiDefault": 67108864,
      "MinimumMtu": 1500
    }
  },
  "Receiver": {
    "DatastreamIpAddress": null,
    "IpAddress": null,
    "ConnectionTimeout": "00:00:00.3",
    "DefaultCommandTimeout": "00:00:00.3",
    "OverrideCommandTimeouts": {
      "Get-GNSS_Status-0x400": "00:00:02",
      "Set-GNSS_Control-0x401": "00:00:02",
      "Get-GNSS_Position-0x402": "00:00:02",
      "Get-InstantViewBandwidth-0x15": "00:00:02"
    },
    "CommandQueueTimeout": "00:00:02",
    "CommandRetryCount": 3,
    "CommandRetryInterval": "00:00:00",
    "Type": "Minerva",
    "MaxBandwidth": 491520000,
    "Bandwidth": 400000000,
    "PersistenceSmoothingFactor": 0.3,
    "PersistenceSpectrumPort": 30000,
    "IQPort": 60000,
    "SpectrumPort": 40000,
    "ThresholdPort": 45000,
    "PdwPort": 50000,
    "ControlPort": 50000,
    "SpectrumPayloadSize": 1028,
    "ThresholdPayloadSize": 1028,
    "PersistencePayloadSize": 1028,
    "IQPayloadSize": 8184,
    "PdwPayloadSize": 1024,
    "SnrMinThreshold": 15,
    "SnrMaxThreshold": 35,
    "PdwVersion": "1.5.0",
    "IQTriggerOnceTimeout": "00:00:01"
  },
  "Positioner": {
    "IpAddress": "",
    "Port": "9000",
    "ConnectionTimeout": "00:00:00.5",
    "CommandTimeout": "00:00:00.5",
    "CommandRetryCount": 3,
    "CommandRetryInterval": "00:00:00"
  },
  "AntennaRotator": {
    "IpAddress": "",
    "Port": "5025",
    "Type": "AltAzimuth",
    "RotationTimeout": 100000,
    "DelayAfterSetPos": 1000,
    "MaxTimeForChangeAngle": "00:02:00",
    "CommandsExecutingDelay": "00:00:5",
    "ConnectionTimeout": "00:00:00.5",
    "CommandTimeout": "00:00:00.5",
    "AngleDecimalPlaces": 0,
    "KolovratStartAngle": 125,
    "KolovratMaxAngle": 250,
    "KolovratWakeUpTimeout": "00:01:00",
    "Azimuth0": "0",
    "RotatorParkingAngle": "0",
    "DisableClusterizationOnRotation": false,
    "CommandRetryCount": 3,
    "CommandRetryInterval": "00:00:00"
  },
  "Supervisor": {
    "IpAddress": "",
    "Port": 4142,
    "ConnectionTimeout": "00:00:30",
    "CommandTimeout": "00:00:05",
    "CommandRetryCount": 3,
    "CommandRetryInterval": "00:00:00"
  },
  "Geolocation": {
    "Tdoa": {
      "Ptoa": {
        "StationsFor2Calculation": 2,
        "StationsFor3Calculation": 3,
        "StationsFor2PairsCalculation": 4,
        "DebugInfoEnabled": false,
        "PdwExportRelativePath": "Data/PTOA",
        "CalcInterval": "00:00:10",
        "RemotePdwLoadingTimeout": "00:00:02",
        "DefaultConfidence": 0.8,
        "TimeShiftSettings": {
          "StationsMinCount": 2,
          "StationsMaxCount": 4,
          "MinBinSmallCrc": 64,
          "MinBinBigCrc": 64,
          "NumberBinsSmallCrc": 101,
          "NumberBinsBigCrc": 1001,
          "MinAllDiff": 0
        },
        "MmpEstimationSettings": {
          "NSigmasSmallCrc": 2,
          "NSigmasBigCrc": 0.3,
          "ThresholdCoefficientSmallCrc": 2,
          "ThresholdCoefficientBigCrc": 150
        }
      },
      "HeatMap": {
        "TwoStations": {
          "CellSizeSmallCrc": 50,
          "CellSizeBigCrc": 50,
          "MatrixSizeSmallCrc": 6000,
          "MatrixSizeBigCrc": 6000,
          "HeatMapThreshold": 0.65
        },
        "TreeStations": {
          "CellSizeSmallCrc": 50,
          "CellSizeBigCrc": 50,
          "MatrixSizeSmallCrc": 6000,
          "MatrixSizeBigCrc": 6000,
          "HeatMapThreshold": 0.89
        },
        "FourStations": {
          "CellSizeSmallCrc": 50,
          "CellSizeBigCrc": 50,
          "MatrixSizeSmallCrc": 6000,
          "MatrixSizeBigCrc": 6000,
          "HeatMapThreshold": 0.65
        }
      }
    },
    "Aoa": {
      "AoaSingle": {
        "Algorithm": "Basic",
        "Basic": {
          "MinLevel": -30,
          "DtWindow": 2.0,
          "MinVariance": 1.0,
          "YMin": 0,
          "CellSize": 100,
          "MatrixSize": 200000,
          "DefaultConfidence": 0.8
        },
        "Lsm": {
          "DtWindow": 1.0,
          "MinVariance": 1.0,
          "YMin": 0,
          "CellSize": 25,
          "MatrixSize": 50000,
          "DefaultConfidence": 0.7,
          "T0": 1,
          "NWind": 10,
          "QAV": 100
        },
        "VirtualRadioPair": {
          "DefaultConfidence": 0.95,
          "T0": 1,
          "NWind": 10,
          "QAV": 100,
          "RMax": 100
        }
      }
    }
  },
  "Clusterization": {
    "MinImpulsesToShowCluster": 50,
    "PdwMaxLimit": 10000,
    "GlobalClustersMaxLimit": 512,
    "PriMinValue": 3000,
    "PriMaxValue": 10000000,
    "Parallel": {
      "FrequencyStd": 0.3,
      "MaxDistanceFrequency": 10,
      "NumberOfParallelTasks": 4,
      "PdwBufferSize": 256,
      "PdwBufferTimespan": 1000,
      "MergeLocalClusters": true,
      "MergeGlobalClusters": true
    }
  },
  "Deinterleaving": {
    "PriConfidenceHighThreshold": 0.75,
    "PriConfidenceMediumThreshold": 0.5,
    "ContinuouslyFeatureThreshold": 0.35,
    "MonotonicFeatureThreshold": 0.25,
    "LinearityFeatureThreshold": 0.3,
    "MeanPriMinValueFilterMultiplier": 0.51,
    "MeanPriMaxValueFilterMultiplier": 1.99,
    "ThContinuously": 0.02,
    "ThMonotonic": 0.01,
    "MaxBinPeaksNumberDivider": 2,
    "FilterMeanPriMinMultiplier": 0.1,
    "StaggerAndSlidingTypeFilterMeanPriMinMultiplier": 0.001,
    "FilterMeanPriMaxMultiplier": 0.5,
    "WobulatedTypeFilterMeanPriMaxMultiplier": 0.06,
    "MinStdPriHistogramValue": 250,
    "LevelThreshold": -75,
    "MaxStaggerLevel": 16,
    "MaxDiscreteJitterLevel": 32,
    "MinStaggerLevel": 2,
    "MinDwellSwitchLevel": 2,
    "PdwItemsNumberForCalculating": 1000,
    "PriMinCount": 10,
    "StepValue": 100,
    "PulseWidthFilterMultiplier": 4,
    "FilterContinuouslyFeatureMinValue": 0,
    "FilterContinuouslyFeatureMaxValue": 1,
    "FilterMonotonicFeatureMaxValue": 1,
    "FilterHistogramPeaksNumberCountForConstantType": 1,
    "FilterHistogramPeaksNumberMaxCount": 3
  },
  "ClusterGrouping": {
    "FrequencyAssociationPrecision": 1.0,
    "DOAChangePrecision": 0.001,
    "ClusterCoordinatesChangePrecision": 0.0001,
    "AoaCalculationMinPdwThreshold": 50,
    "AoaCalculationBufferTimeThreshold": "00:00:02",
    "AoaCalculationTimerPeriod": "00:00:01"
  },
  "RadarAssociation": {
    "BufferInterval": "00:00:02",
    "BufferCount": 100,
    "FrequencyStd": 0.3,
    "PulseWidthStd": 2,
    "PriStd": 1000
  },
  "Teneta": {
    "ApplicationId": "RSAAS",
    "CallsignFrom": "RSAAS001",
    "CallsignTo": "TST1",
    "ServiceUrl": "ws://127.0.0.1:8080/websocket",
    "Milliradians": "Old"
  },
  "Map": {
    "BearingDistanceKm": 800
  },
  "Logging": {
    "LogLevel": {
      "Default": "Debug"
    },
    "NLog": {
      "IncludeScopes": true
    }
  },
  "NLog": {
    "autoReload": true,
    "throwConfigExceptions": true,
    "internalLogLevel": "Warn",
    "internalLogFile": "${var:%CommonAppDataPath%:whenEmpty=${basedir}}/Logs/internal.json",
    "extensions": [
      {
        "assembly": "NLog.Extensions.Logging"
      }
    ],
    "targets": {
      "console": {
        "type": "ColoredConsole",
        "layout": {
          "type": "SimpleLayout",
          "Text": "${longdate}|${level}|${logger:shortName=true}|${message}${onexception:${newline}${exception:format=Message,StackTrace,Data:maxInnerExceptionLevel=5}}"
        }
      },
      "all-file": {
        "type": "File",
        "fileName": "${var:%CommonAppDataPath%:whenEmpty=${basedir}}/Logs/${shortdate}_server_${var:%station-id%}.json",
        "maxArchiveDays": 30,
        "archiveAboveSize": 52428800,
        "archiveEvery": "Day",
        "layout": {
          "type": "JsonLayout",
          "Attributes": [
            {
              "name": "Timestamp",
              "layout": "${date:format=o}"
            },
            {
              "name": "Level",
              "layout": "${level}"
            },
            {
              "name": "Logger",
              "layout": "${logger}"
            },
            {
              "name": "Message",
              "layout": "${message}"
            },
            {
              "name": "Exception",
              "layout": "${exception:format=Message,StackTrace,Data:maxInnerExceptionLevel=5}"
            }
          ]
        }
      }
    },
    "rules": [
      {
        "logger": "RPC-*",
        "finalMinLevel": "Warn",
        "writeTo": "all-file,console",
        "final": true,
        "enabled": true
      },
      {
        "logger": "Infozahyst.RSAAS.Core.Transport.MQTT.MqttNetLogger",
        "finalMinLevel": "Warn",
        "writeTo": "all-file,console",
        "final": true,
        "enabled": true
      },
      {
        "logger": "Microsoft.*",
        "maxLevel": "Warn",
        "final": true
      },
      {
        "logger": "*",
        "minLevel": "Info",
        "writeTo": "all-file,console"
      }
    ]
  }
}